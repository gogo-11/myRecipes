<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title th:text="${currentUser.firstName+ ' ' + currentUser.lastName + ' - Профил' +' | MyRecipes'}"></title>
    <link rel="stylesheet" href="/css/style.css"/>
</head>

<body>
<div class="body-container">
    <div class="user-account" sec:authorize="!isAuthenticated()">
        <a href="/login_form">Вход</a>
        или
        <a href="/registration">Регистрация</a>
    </div>

    <div class="user-account" sec:authorize="isAuthenticated()">
        <form id="logoutForm" method="POST" th:action="@{/logout}">
            <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        </form>
        Добре дошли, <span sec:authentication="name"></span> | <a onclick="document.forms['logoutForm'].submit()">Изход</a>
        <!--        <small th:utext="${#strings.substringAfter("sec:authentication="'name','_'}"></small>-->
    </div>

    <div class="top-menu">
        <a th:href="welcome" href="welcome.html"> <img src="/img/home.png" width="20"></a>
        <a th:href="all-recipes" href="all-recipes.html">Всички рецепти</a>
        <a href="search">Потърси рецепта</a>
        <div sec:authorize="hasRole('ROLE_USER')" >
            <a th:href="login-form" href="login_form.html" >Тайни рецепти</a>
            <a href="/my-recipes">Мои рецепти</a>
            <a th:href="add-recipe" href="add-recipe.html">Добави рецепта</a>
            <a th:href="account" href="account.html">Профил</a>
        </div>
    </div>

    <div class="content">
        <h2 th:text="${currentUser.firstName}"></h2>
        <br>
<!--        <table>-->
<!--            &lt;!&ndash;        <thead>&ndash;&gt;-->
<!--            &lt;!&ndash;        <tr>&ndash;&gt;-->
<!--            &lt;!&ndash;            <th>Latest recipes</th>&ndash;&gt;-->
<!--            &lt;!&ndash;        </tr>&ndash;&gt;-->
<!--            &lt;!&ndash;        </thead>&ndash;&gt;-->
<!--            <tbody>-->
<!--            <tr th:each="recipesRow: ${recipesRows}">-->
<!--                &lt;!&ndash;            th:each="recipe: ${recipesRow}"&ndash;&gt;-->
<!--                <td th:each="recipe: ${recipesRow}">-->
<!--                    <a th:href="@{/view-recipe/__${recipe.id}__}" th:text="${recipe.recipeName}"/>-->
<!--                </td>-->
<!--            </tr>-->
<!--            </tbody>-->
<!--        </table>-->

        <div class="forms" style="text-align: left; border:0px;">
            <form th:object="${request}" method="post">
                <span>Вашите данни</span> <br>

                <input name="firstName" type="text" required placeholder="Име" th:value="${currentUser.firstName}">

                <br><span th:text="${errFirstName}"></span><br>

                <input name="lastName" type="text" required placeholder="Фамилия" th:value="${currentUser.lastName}">
                <span th:text="${errLastName}"></span>
                <br><br>

                <input name="email" type="email" required placeholder="example@mail.com" th:value="${currentUser.email}">
                <span th:text="${errEmail}"></span>
                <br><br>

<!--                <input id="pass" name="password" type="password" required placeholder="Парола">-->
<!--                <br>-->
<!--                <input type="checkbox" onclick="showPassword()" id="passShow"> <label for="passShow" style="font-size: 14px">покажи паролата</label>-->
<!--                <br><br>-->

<!--                <input id="cPass" name="confirmPass" type="password" required placeholder="Повтори паролата" oninput="matchPassword()"> <br>-->
<!--                <span id="Message"></span>-->
<!--                <br><br>-->

                <input id="subm" type="Submit" value="Обнови информацията"> <br><br>


            </form>
        </div>

        <div sec:authorize="hasRole('ROLE_ADMIN')">
            This content is only shown to administrators.§§
        </div>

        <div sec:authorize="hasRole('ROLE_USER')">
            This content is only shown to users.
        </div>

    </div>
</div>

</body>
</html>